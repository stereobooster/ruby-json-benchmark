Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
            to_json:   510.543M memsize (   248.000  retained)
                        10.400M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    89.580M memsize (     0.000  retained)
                       690.000k objects (     0.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    82.600M memsize (     0.000  retained)
                       890.000k objects (     0.000  retained)
                        20.000  strings (     0.000  retained)
       Oj.dump c, aj   151.890M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
             msgpack   249.920M memsize (   232.000  retained)
                         4.460M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   82600000 allocated
           Oj.dump o:   89580000 allocated - 1.08x more
       Oj.dump c, aj:  151890000 allocated - 1.84x more
             msgpack:  249920232 allocated - 3.03x more
            to_json::  510542520 allocated - 6.18x more
---------------------------------------------

                     user     system      total        real
to_json:         3.590000   0.100000   3.690000 (  3.755688)
Oj.dump o        0.650000   0.050000   0.700000 (  0.719606)
Oj.dump c        0.720000   0.020000   0.740000 (  0.759399)
Oj.dump c, aj    0.810000   0.020000   0.830000 (  0.839706)
msgpack          1.470000   0.020000   1.490000 (  1.507119)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   507.343M memsize (   248.000  retained)
                        10.320M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    89.580M memsize (     0.000  retained)
                       690.000k objects (     0.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    82.600M memsize (     0.000  retained)
                       890.000k objects (     0.000  retained)
                        20.000  strings (     0.000  retained)
       Oj.dump c, aj   146.290M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
             msgpack   244.329M memsize (     9.344k retained)
                         4.320M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   82600000 allocated
           Oj.dump o:   89580000 allocated - 1.08x more
       Oj.dump c, aj:  146290000 allocated - 1.77x more
             msgpack:  244329344 allocated - 2.96x more
             to_json:  507342520 allocated - 6.14x more
---------------------------------------------

                     user     system      total        real
to_json          5.950000   0.350000   6.300000 (  6.408731)
Oj.dump o        0.780000   0.100000   0.880000 (  0.890297)
Oj.dump c        0.640000   0.020000   0.660000 (  0.670642)
Oj.dump c, aj    0.810000   0.030000   0.840000 (  0.851931)
msgpack          1.410000   0.050000   1.460000 (  1.488348)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from projects/ruby-json-benchmark/test_data.rb:97:in `<top (required)>'
	from compatibility_test.rb:3:in `require'
	from compatibility_test.rb:3:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   510.543M memsize (   344.000  retained)
                        10.400M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    81.450M memsize (     0.000  retained)
                       680.000k objects (     0.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    76.510M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        20.000  strings (     0.000  retained)
       Oj.dump c, aj   151.890M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
             msgpack   249.920M memsize (   232.000  retained)
                         4.460M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   76510000 allocated
           Oj.dump o:   81450000 allocated - 1.06x more
       Oj.dump c, aj:  151890000 allocated - 1.99x more
             msgpack:  249920232 allocated - 3.27x more
             to_json:  510542520 allocated - 6.67x more
---------------------------------------------

                     user     system      total        real
to_json          5.540000   0.490000   6.030000 (  6.208701)
Oj.dump o        0.760000   0.320000   1.080000 (  1.079360)
Oj.dump c        0.610000   0.050000   0.660000 (  0.672159)
Oj.dump c, aj    0.920000   0.160000   1.080000 (  1.105514)
msgpack          1.450000   0.200000   1.650000 (  1.652641)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   507.343M memsize (   344.000  retained)
                        10.320M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    81.450M memsize (     0.000  retained)
                       680.000k objects (     0.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    76.510M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        20.000  strings (     0.000  retained)
       Oj.dump c, aj   146.290M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
             msgpack   244.329M memsize (     9.344k retained)
                         4.320M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   76510000 allocated
           Oj.dump o:   81450000 allocated - 1.06x more
       Oj.dump c, aj:  146290000 allocated - 1.91x more
             msgpack:  244329344 allocated - 3.19x more
             to_json:  507342520 allocated - 6.63x more
---------------------------------------------

                     user     system      total        real
to_json          5.820000   0.300000   6.120000 (  6.197274)
Oj.dump o        0.730000   0.100000   0.830000 (  0.842025)
Oj.dump c        0.550000   0.010000   0.560000 (  0.560618)
Oj.dump c, aj    0.830000   0.040000   0.870000 (  0.872972)
msgpack          1.350000   0.030000   1.380000 (  1.387991)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | âŒ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | âŒ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ‘Œ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | âŒ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | âŒ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | âŒ            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | âŒ            | âŒ        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | âŒ            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   481.042M memsize (   536.000  retained)
                        10.220M objects (     6.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    79.050M memsize (   192.000  retained)
                       620.001k objects (     1.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    71.480M memsize (     0.000  retained)
                       750.000k objects (     0.000  retained)
                        16.000  strings (     0.000  retained)
       Oj.dump c, aj   140.090M memsize (     0.000  retained)
                         2.940M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)
             msgpack   229.478M memsize (     7.944k retained)
                         4.220M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   71480000 allocated
           Oj.dump o:   79050192 allocated - 1.11x more
       Oj.dump c, aj:  140090000 allocated - 1.96x more
             msgpack:  229477944 allocated - 3.21x more
             to_json:  481042272 allocated - 6.73x more
---------------------------------------------

                     user     system      total        real
to_json          4.520000   0.200000   4.720000 (  4.810612)
Oj.dump o        0.580000   0.070000   0.650000 (  0.652941)
Oj.dump c        0.680000   0.060000   0.740000 (  0.740342)
Oj.dump c, aj    0.710000   0.010000   0.720000 (  0.737661)
msgpack          1.420000   0.100000   1.520000 (  1.590079)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   505.833M memsize (   504.000  retained)
                        10.280M objects (     8.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    40.480M memsize (     0.000  retained)
                       630.000k objects (     0.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    75.200M memsize (     0.000  retained)
                       860.000k objects (     0.000  retained)
                        20.000  strings (     0.000  retained)
       Oj.dump c, aj   145.980M memsize (     0.000  retained)
                         3.030M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)
             msgpack   244.020M memsize (   232.000  retained)
                         4.310M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   40480000 allocated
           Oj.dump c:   75200000 allocated - 1.86x more
       Oj.dump c, aj:  145980000 allocated - 3.61x more
             msgpack:  244020232 allocated - 6.03x more
             to_json:  505832848 allocated - 12.50x more
---------------------------------------------

                     user     system      total        real
to_json          4.930000   0.370000   5.300000 (  5.308797)
Oj.dump o        0.340000   0.010000   0.350000 (  0.367898)
Oj.dump c        0.610000   0.090000   0.700000 (  0.706776)
Oj.dump c, aj    0.880000   0.150000   1.030000 (  1.045650)
msgpack          1.390000   0.190000   1.580000 (  1.591733)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ’€            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   502.633M memsize (   464.000  retained)
                        10.200M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    79.850M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    75.200M memsize (     0.000  retained)
                       860.000k objects (     0.000  retained)
                        20.000  strings (     0.000  retained)
       Oj.dump c, aj   140.380M memsize (     0.000  retained)
                         2.890M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)
             msgpack   238.429M memsize (     9.344k retained)
                         4.170M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   75200000 allocated
           Oj.dump o:   79850000 allocated - 1.06x more
       Oj.dump c, aj:  140380000 allocated - 1.87x more
             msgpack:  238429344 allocated - 3.17x more
             to_json:  502632848 allocated - 6.68x more
---------------------------------------------

                     user     system      total        real
to_json          4.060000   0.060000   4.120000 (  4.217131)
Oj.dump o        0.570000   0.020000   0.590000 (  0.598833)
Oj.dump c        0.620000   0.020000   0.640000 (  0.644242)
Oj.dump c, aj    1.650000   0.080000   1.730000 (  1.808054)
msgpack          2.720000   0.190000   2.910000 (  2.967861)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| class                           | JSON.generate | Oj object | Oj compat | Oj compat+as_json | msgpack |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+
| Regexp                          | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Object                          | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringChinese                   | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial                   | âŒ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| StringSpecial2                  | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| StringSpecial3                  | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Symbol                          | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Time                            | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Date                            | ğŸ‘Œ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| DateTime                        | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Enumerable                      | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| BigDecimalInfinity              | âŒ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Struct                          | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| FloatInfinity                   | ğŸ’€            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | âŒ      |
| Range                           | ğŸ‘Œ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Complex                         | ğŸ‘Œ            | ğŸ’€        | âŒ        | âŒ                | ğŸ‘Œ      |
| Exception                       | ğŸ‘Œ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| OpenStruct                      | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| Rational                        | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| Process::Status                 | âŒ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ        | âŒ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveModel::Errors             | âŒ            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Duration         | âŒ            | âŒ        | ğŸ‘Œ        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ        | âŒ        | âŒ                | ğŸ‘Œ      |
| ActiveRecord::Relation          | âŒ            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
| ActiveRecord                    | âŒ            | ğŸ’€        | ğŸ’€        | ğŸ‘Œ                | ğŸ‘Œ      |
+---------------------------------+---------------+-----------+-----------+-------------------+---------+

Calculating -------------------------------------
             to_json   477.133M memsize (   656.000  retained)
                        10.120M objects (     8.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    77.450M memsize (   192.000  retained)
                       600.001k objects (     1.000  retained)
                         4.000  strings (     0.000  retained)
           Oj.dump c    70.170M memsize (     0.000  retained)
                       730.000k objects (     0.000  retained)
                        16.000  strings (     0.000  retained)
       Oj.dump c, aj   134.980M memsize (     0.000  retained)
                         2.810M objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
             msgpack   224.378M memsize (     7.944k retained)
                         4.090M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
           Oj.dump c:   70170000 allocated
           Oj.dump o:   77450192 allocated - 1.10x more
       Oj.dump c, aj:  134980000 allocated - 1.92x more
             msgpack:  224377944 allocated - 3.20x more
             to_json:  477132520 allocated - 6.80x more
---------------------------------------------

                     user     system      total        real
to_json          3.650000   0.050000   3.700000 (  3.849646)
Oj.dump o        0.540000   0.020000   0.560000 (  0.563295)
Oj.dump c        0.540000   0.010000   0.550000 (  0.557597)
Oj.dump c, aj    0.750000   0.000000   0.750000 (  0.750403)
msgpack          2.490000   0.260000   2.750000 (  2.778289)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
