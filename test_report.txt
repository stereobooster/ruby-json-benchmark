Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ’€            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   494.023M memsize (   248.000  retained)
                        10.070M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   151.770M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   151.770M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   151.770M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:  151770000 allocated
           Oj.dump o:  151770000 allocated - same
           Oj.dump c:  151770000 allocated - same
            to_json::  494022520 allocated - 3.26x more
---------------------------------------------

                     user     system      total        real
to_json:         3.380000   0.090000   3.470000 (  3.469703)
Oj.dump o        0.570000   0.010000   0.580000 (  0.583309)
Oj.dump c        0.600000   0.010000   0.610000 (  0.612885)
Oj.dump c, aj    0.820000   0.010000   0.830000 (  0.854545)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ’€            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   490.823M memsize (   248.000  retained)
                         9.990M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   146.170M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   146.170M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   146.170M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  146170000 allocated
           Oj.dump c:  146170000 allocated - same
       Oj.dump c, aj:  146170000 allocated - same
            to_json::  490822520 allocated - 3.36x more
---------------------------------------------

                     user     system      total        real
to_json:         3.390000   0.130000   3.520000 (  3.547378)
Oj.dump o        0.550000   0.020000   0.570000 (  0.565910)
Oj.dump c        0.610000   0.010000   0.620000 (  0.631562)
Oj.dump c, aj    0.680000   0.010000   0.690000 (  0.687289)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from /projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from /projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from /projects/ruby-json-benchmark/test_data.rb:92:in `<top (required)>'
	from compatibility_test.rb:1:in `require'
	from compatibility_test.rb:1:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ’€            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   494.023M memsize (   344.000  retained)
                        10.070M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   151.770M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   151.770M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   151.770M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:  151770000 allocated
           Oj.dump o:  151770000 allocated - same
           Oj.dump c:  151770000 allocated - same
            to_json::  494022520 allocated - 3.26x more
---------------------------------------------

                     user     system      total        real
to_json:         3.740000   0.130000   3.870000 (  3.970841)
Oj.dump o        0.600000   0.030000   0.630000 (  0.661870)
Oj.dump c        0.660000   0.030000   0.690000 (  0.736414)
Oj.dump c, aj    0.790000   0.010000   0.800000 (  0.817309)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ’€            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   525.843M memsize (   344.000  retained)
                        10.590M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   162.630M memsize (     0.000  retained)
                         3.250M objects (     0.000  retained)
                        46.000  strings (     0.000  retained)
           Oj.dump c   162.630M memsize (     0.000  retained)
                         3.250M objects (     0.000  retained)
                        46.000  strings (     0.000  retained)
       Oj.dump c, aj   162.630M memsize (     0.000  retained)
                         3.250M objects (     0.000  retained)
                        46.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  162630000 allocated
           Oj.dump c:  162630000 allocated - same
       Oj.dump c, aj:  162630000 allocated - same
            to_json::  525842520 allocated - 3.23x more
---------------------------------------------

                     user     system      total        real
to_json:         5.910000   0.110000   6.020000 (  6.577442)
Oj.dump o      benchmark2.rb:32:in `dump': Too deeply nested. (NoMemoryError)
	from benchmark2.rb:32:in `block (3 levels) in <main>'
	from benchmark2.rb:32:in `times'
	from benchmark2.rb:32:in `block (2 levels) in <main>'
	from /.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:293:in `measure'
	from /.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:375:in `item'
	from benchmark2.rb:32:in `block in <main>'
	from /.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:173:in `benchmark'
	from benchmark2.rb:29:in `<main>'
FAILURE gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | âŒ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | âŒ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ‘Œ            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | âŒ            | âŒ             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveRecord                    | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   513.632M memsize (   536.000  retained)
                        10.480M objects (     6.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   154.430M memsize (     0.000  retained)
                         3.140M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)
           Oj.dump c   154.430M memsize (     0.000  retained)
                         3.140M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)
       Oj.dump c, aj   154.430M memsize (     0.000  retained)
                         3.140M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  154430000 allocated
           Oj.dump c:  154430000 allocated - same
       Oj.dump c, aj:  154430000 allocated - same
            to_json::  513632272 allocated - 3.33x more
---------------------------------------------

                     user     system      total        real
to_json:         3.850000   0.060000   3.910000 (  3.977919)
Oj.dump o      benchmark2.rb:32:in `dump': Too deeply nested. (NoMemoryError)
	from benchmark2.rb:32:in `block (3 levels) in <main>'
	from benchmark2.rb:32:in `times'
	from benchmark2.rb:32:in `block (2 levels) in <main>'
	from /.rbenv/versions/2.4.0/lib/ruby/2.4.0/benchmark.rb:293:in `measure'
	from /.rbenv/versions/2.4.0/lib/ruby/2.4.0/benchmark.rb:375:in `item'
	from benchmark2.rb:32:in `block in <main>'
	from /.rbenv/versions/2.4.0/lib/ruby/2.4.0/benchmark.rb:173:in `benchmark'
	from benchmark2.rb:29:in `<main>'
FAILURE gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ’€            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   522.333M memsize (   736.000  retained)
                        10.500M objects (    10.000  retained)
                        50.000  strings (     2.000  retained)
           Oj.dump o   160.320M memsize (   232.000  retained)
                         3.190M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
           Oj.dump c   160.320M memsize (   232.000  retained)
                         3.190M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
       Oj.dump c, aj   160.320M memsize (   232.000  retained)
                         3.190M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:  160320232 allocated
           Oj.dump o:  160320232 allocated - same
           Oj.dump c:  160320232 allocated - same
            to_json::  522333120 allocated - 3.26x more
---------------------------------------------

                     user     system      total        real
to_json:         6.850000   0.150000   7.000000 (  8.125728)
Oj.dump o      benchmark2.rb:32:in `dump': Too deeply nested. (NoMemoryError)
	from benchmark2.rb:32:in `block (3 levels) in <main>'
	from benchmark2.rb:32:in `times'
	from benchmark2.rb:32:in `block (2 levels) in <main>'
	from /.rbenv/versions/2.2.6/lib/ruby/2.2.0/benchmark.rb:288:in `measure'
	from /.rbenv/versions/2.2.6/lib/ruby/2.2.0/benchmark.rb:370:in `item'
	from benchmark2.rb:32:in `block in <main>'
	from /.rbenv/versions/2.2.6/lib/ruby/2.2.0/benchmark.rb:172:in `benchmark'
	from benchmark2.rb:29:in `<main>'
FAILURE gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ’€            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveRecord                    | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   519.133M memsize (   504.000  retained)
                        10.420M objects (     8.000  retained)
                        50.000  strings (     2.000  retained)
           Oj.dump o   154.720M memsize (     0.000  retained)
                         3.050M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)
           Oj.dump c   154.720M memsize (     0.000  retained)
                         3.050M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)
       Oj.dump c, aj   154.720M memsize (     0.000  retained)
                         3.050M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  154720000 allocated
           Oj.dump c:  154720000 allocated - same
       Oj.dump c, aj:  154720000 allocated - same
            to_json::  519132888 allocated - 3.36x more
---------------------------------------------

                     user     system      total        real
to_json:         4.100000   0.120000   4.220000 (  4.280562)
Oj.dump o      benchmark2.rb:32:in `dump': Too deeply nested. (NoMemoryError)
	from benchmark2.rb:32:in `block (3 levels) in <main>'
	from benchmark2.rb:32:in `times'
	from benchmark2.rb:32:in `block (2 levels) in <main>'
	from /.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:293:in `measure'
	from /.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:375:in `item'
	from benchmark2.rb:32:in `block in <main>'
	from /.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:173:in `benchmark'
	from benchmark2.rb:29:in `<main>'
FAILURE gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | âŒ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial2                  | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial3                  | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Enumerable                      | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | âŒ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Struct                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Complex                         | ğŸ‘Œ            | ğŸ’€             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Exception                       | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| OpenStruct                      | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Rational                        | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveRecord                    | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   507.723M memsize (   696.000  retained)
                        10.330M objects (     9.000  retained)
                        50.000  strings (     2.000  retained)
           Oj.dump o   147.320M memsize (     0.000  retained)
                         2.960M objects (     0.000  retained)
                        37.000  strings (     0.000  retained)
           Oj.dump c   147.320M memsize (     0.000  retained)
                         2.960M objects (     0.000  retained)
                        37.000  strings (     0.000  retained)
       Oj.dump c, aj   147.320M memsize (     0.000  retained)
                         2.960M objects (     0.000  retained)
                        37.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  147320000 allocated
           Oj.dump c:  147320000 allocated - same
       Oj.dump c, aj:  147320000 allocated - same
            to_json::  507722560 allocated - 3.45x more
---------------------------------------------

                     user     system      total        real
to_json:         4.190000   0.070000   4.260000 (  4.388352)
Oj.dump o      benchmark2.rb:32:in `dump': Too deeply nested. (NoMemoryError)
	from benchmark2.rb:32:in `block (3 levels) in <main>'
	from benchmark2.rb:32:in `times'
	from benchmark2.rb:32:in `block (2 levels) in <main>'
	from /.rbenv/versions/2.4.0/lib/ruby/2.4.0/benchmark.rb:293:in `measure'
	from /.rbenv/versions/2.4.0/lib/ruby/2.4.0/benchmark.rb:375:in `item'
	from benchmark2.rb:32:in `block in <main>'
	from /.rbenv/versions/2.4.0/lib/ruby/2.4.0/benchmark.rb:173:in `benchmark'
	from benchmark2.rb:29:in `<main>'
FAILURE gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
FAILURE gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
FAILURE gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
FAILURE gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
FAILURE gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
FAILURE gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
BUNDLE_GEMFILE=gemfiles/4.2.8.gemfile RBENV_VERSION=2.3.3 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
BUNDLE_GEMFILE=gemfiles/4.2.8.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
BUNDLE_GEMFILE=gemfiles/5.0.2.gemfile RBENV_VERSION=2.2.6 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
BUNDLE_GEMFILE=gemfiles/5.0.2.gemfile RBENV_VERSION=2.3.3 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
BUNDLE_GEMFILE=gemfiles/5.0.2.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
