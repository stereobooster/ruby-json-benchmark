Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   340.131M memsize (   168.000  retained)
                         6.660M objects (     2.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    55.880M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
           Oj.dump c    55.880M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
       Oj.dump c, aj    55.880M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   55880000 allocated
           Oj.dump o:   55880000 allocated - same
           Oj.dump c:   55880000 allocated - same
            to_json::  340130720 allocated - 6.09x more
---------------------------------------------

                     user     system      total        real
to_json:         2.890000   0.260000   3.150000 (  3.260201)
Oj.dump o        0.210000   0.010000   0.220000 (  0.213544)
Oj.dump c        0.630000   0.020000   0.650000 (  0.671154)
Oj.dump c, aj    0.490000   0.010000   0.500000 (  0.501121)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.731M memsize (   168.000  retained)
                         6.550M objects (     2.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    49.080M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c    49.080M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj    49.080M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   49080000 allocated
           Oj.dump c:   49080000 allocated - same
       Oj.dump c, aj:   49080000 allocated - same
            to_json::  335730720 allocated - 6.84x more
---------------------------------------------

                     user     system      total        real
to_json:         3.310000   0.420000   3.730000 (  3.794683)
Oj.dump o        0.180000   0.010000   0.190000 (  0.181546)
Oj.dump c        0.430000   0.000000   0.430000 (  0.446165)
Oj.dump c, aj    0.430000   0.010000   0.440000 (  0.445222)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
/Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from /Users/vvysokins/projects/ruby-json-benchmark/test_data.rb:84:in `<top (required)>'
	from compatibility_test.rb:1:in `require'
	from compatibility_test.rb:1:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   340.131M memsize (   264.000  retained)
                         6.660M objects (     3.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    55.880M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
           Oj.dump c    55.880M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
       Oj.dump c, aj    55.880M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   55880000 allocated
           Oj.dump o:   55880000 allocated - same
           Oj.dump c:   55880000 allocated - same
            to_json::  340130720 allocated - 6.09x more
---------------------------------------------

                     user     system      total        real
to_json:         3.130000   0.130000   3.260000 (  3.275857)
Oj.dump o        0.180000   0.010000   0.190000 (  0.189390)
Oj.dump c        0.410000   0.000000   0.410000 (  0.415741)
Oj.dump c, aj    0.520000   0.010000   0.530000 (  0.544536)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.731M memsize (   264.000  retained)
                         6.550M objects (     3.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    49.080M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c    49.080M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj    49.080M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   49080000 allocated
           Oj.dump c:   49080000 allocated - same
       Oj.dump c, aj:   49080000 allocated - same
            to_json::  335730720 allocated - 6.84x more
---------------------------------------------

                     user     system      total        real
to_json:         3.460000   0.540000   4.000000 (  4.036344)
Oj.dump o        0.180000   0.000000   0.180000 (  0.183659)
Oj.dump c        0.400000   0.020000   0.420000 (  0.419100)
Oj.dump c, aj    0.450000   0.010000   0.460000 (  0.464598)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | âŒ            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   314.631M memsize (   456.000  retained)
                         6.390M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    41.670M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
           Oj.dump c    41.670M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
       Oj.dump c, aj    41.670M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   41670000 allocated
           Oj.dump c:   41670000 allocated - same
       Oj.dump c, aj:   41670000 allocated - same
            to_json::  314630672 allocated - 7.55x more
---------------------------------------------

                     user     system      total        real
to_json:         2.720000   0.170000   2.890000 (  2.908683)
Oj.dump o        0.180000   0.000000   0.180000 (  0.177998)
Oj.dump c        0.400000   0.020000   0.420000 (  0.440067)
Oj.dump c, aj    0.420000   0.020000   0.440000 (  0.435960)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.731M memsize (   384.000  retained)
                         6.550M objects (     5.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    51.480M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
           Oj.dump c    51.480M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
       Oj.dump c, aj    51.480M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   51480000 allocated
           Oj.dump o:   51480000 allocated - same
           Oj.dump c:   51480000 allocated - same
            to_json::  335731048 allocated - 6.52x more
---------------------------------------------

                     user     system      total        real
to_json:         3.190000   0.480000   3.670000 (  3.685721)
Oj.dump o        0.190000   0.000000   0.190000 (  0.192013)
Oj.dump c        0.600000   0.060000   0.660000 (  0.668285)
Oj.dump c, aj    0.420000   0.010000   0.430000 (  0.431427)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   331.331M memsize (   384.000  retained)
                         6.440M objects (     5.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    44.680M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)
           Oj.dump c    44.680M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)
       Oj.dump c, aj    44.680M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   44680000 allocated
           Oj.dump c:   44680000 allocated - same
       Oj.dump c, aj:   44680000 allocated - same
            to_json::  331331048 allocated - 7.42x more
---------------------------------------------

                     user     system      total        real
to_json:         3.600000   0.380000   3.980000 (  4.092920)
Oj.dump o        0.230000   0.010000   0.240000 (  0.241909)
Oj.dump c        0.480000   0.040000   0.520000 (  0.591394)
Oj.dump c, aj    0.540000   0.020000   0.560000 (  0.630529)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | âŒ            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   311.031M memsize (   576.000  retained)
                         6.300M objects (     6.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    38.070M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)
           Oj.dump c    38.070M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)
       Oj.dump c, aj    38.070M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   38070000 allocated
           Oj.dump c:   38070000 allocated - same
       Oj.dump c, aj:   38070000 allocated - same
            to_json::  311030920 allocated - 8.17x more
---------------------------------------------

                     user     system      total        real
to_json:         3.290000   0.190000   3.480000 (  4.051752)
Oj.dump o        0.250000   0.020000   0.270000 (  0.373820)
Oj.dump c        0.460000   0.070000   0.530000 (  0.600064)
Oj.dump c, aj    0.400000   0.010000   0.410000 (  0.429687)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
