Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   340.121M memsize (   168.000  retained)
                         6.660M objects (     2.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    55.870M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
           Oj.dump c    55.870M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
       Oj.dump c, aj    55.870M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   55870000 allocated
           Oj.dump o:   55870000 allocated - same
           Oj.dump c:   55870000 allocated - same
            to_json::  340120720 allocated - 6.09x more
---------------------------------------------

                     user     system      total        real
to_json:         3.370000   0.590000   3.960000 (  3.987272)
Oj.dump o        0.480000   0.030000   0.510000 (  0.510701)
Oj.dump c        0.520000   0.040000   0.560000 (  0.556446)
Oj.dump c, aj    0.470000   0.030000   0.500000 (  0.506890)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.721M memsize (   168.000  retained)
                         6.550M objects (     2.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    49.070M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c    49.070M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj    49.070M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   49070000 allocated
           Oj.dump c:   49070000 allocated - same
       Oj.dump c, aj:   49070000 allocated - same
            to_json::  335720720 allocated - 6.84x more
---------------------------------------------

                     user     system      total        real
to_json:         3.520000   0.500000   4.020000 (  4.094772)
Oj.dump o        0.460000   0.010000   0.470000 (  0.470155)
Oj.dump c        0.470000   0.040000   0.510000 (  0.513312)
Oj.dump c, aj    0.430000   0.030000   0.460000 (  0.463939)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
/Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from /Users/vvysokins/projects/ruby-json-benchmark/test_data.rb:90:in `<top (required)>'
	from compatibility_test.rb:1:in `require'
	from compatibility_test.rb:1:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   340.121M memsize (   264.000  retained)
                         6.660M objects (     3.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    55.870M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
           Oj.dump c    55.870M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
       Oj.dump c, aj    55.870M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   55870000 allocated
           Oj.dump o:   55870000 allocated - same
           Oj.dump c:   55870000 allocated - same
            to_json::  340120720 allocated - 6.09x more
---------------------------------------------

                     user     system      total        real
to_json:         2.870000   0.140000   3.010000 (  3.052964)
Oj.dump o        0.460000   0.020000   0.480000 (  0.476340)
Oj.dump c        0.570000   0.020000   0.590000 (  0.597636)
Oj.dump c, aj    0.540000   0.010000   0.550000 (  0.563747)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.721M memsize (   264.000  retained)
                         6.550M objects (     3.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    49.070M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c    49.070M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj    49.070M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   49070000 allocated
           Oj.dump c:   49070000 allocated - same
       Oj.dump c, aj:   49070000 allocated - same
            to_json::  335720720 allocated - 6.84x more
---------------------------------------------

                     user     system      total        real
to_json:         3.690000   0.380000   4.070000 (  4.150343)
Oj.dump o        0.420000   0.020000   0.440000 (  0.437955)
Oj.dump c        0.420000   0.020000   0.440000 (  0.444657)
Oj.dump c, aj    0.430000   0.020000   0.450000 (  0.451903)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | âŒ            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   314.621M memsize (   456.000  retained)
                         6.390M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    41.660M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
           Oj.dump c    41.660M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
       Oj.dump c, aj    41.660M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   41660000 allocated
           Oj.dump c:   41660000 allocated - same
       Oj.dump c, aj:   41660000 allocated - same
            to_json::  314620672 allocated - 7.55x more
---------------------------------------------

                     user     system      total        real
to_json:         2.900000   0.180000   3.080000 (  3.151290)
Oj.dump o        0.440000   0.040000   0.480000 (  0.491519)
Oj.dump c        0.370000   0.020000   0.390000 (  0.393636)
Oj.dump c, aj    0.440000   0.020000   0.460000 (  0.464937)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.721M memsize (   384.000  retained)
                         6.550M objects (     5.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    51.470M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
           Oj.dump c    51.470M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
       Oj.dump c, aj    51.470M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   51470000 allocated
           Oj.dump o:   51470000 allocated - same
           Oj.dump c:   51470000 allocated - same
            to_json::  335721048 allocated - 6.52x more
---------------------------------------------

                     user     system      total        real
to_json:         3.730000   0.280000   4.010000 (  4.061154)
Oj.dump o        0.180000   0.010000   0.190000 (  0.188621)
Oj.dump c        0.410000   0.010000   0.420000 (  0.418494)
Oj.dump c, aj    0.430000   0.010000   0.440000 (  0.443252)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | ğŸ’€            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ’€            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ’€            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | ğŸ’€            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   331.321M memsize (   384.000  retained)
                         6.440M objects (     5.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    44.670M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)
           Oj.dump c    44.670M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)
       Oj.dump c, aj    44.670M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   44670000 allocated
           Oj.dump c:   44670000 allocated - same
       Oj.dump c, aj:   44670000 allocated - same
            to_json::  331321048 allocated - 7.42x more
---------------------------------------------

                     user     system      total        real
to_json:         4.560000   0.920000   5.480000 (  5.960857)
Oj.dump o        0.490000   0.030000   0.520000 (  0.545578)
Oj.dump c        0.480000   0.040000   0.520000 (  0.565530)
Oj.dump c, aj    0.460000   0.020000   0.480000 (  0.490763)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| FalseClass                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| NilClass                        | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Object                          | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| TrueClass                       | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| String                          | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringChinese                   | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| StringSpecial                   | âŒ            | âŒ             | âŒ             | âŒ                      |
| Numeric                         | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Symbol                          | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Time                            | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Array                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Hash                            | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| HashNotEmpty                    | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Date                            | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| DateTime                        | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Enumerable                      | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| BigDecimal                      | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| BigDecimalInfinity              | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Struct                          | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| Float                           | ğŸ‘Œ            | ğŸ‘Œ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| FloatInfinity                   | ğŸ’€            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Range                           | ğŸ‘Œ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| Process::Status                 | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveSupport::TimeWithZone     | âŒ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveModel::Errors             | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
| ActiveSupport::Duration         | âŒ            | âŒ             | ğŸ‘Œ             | ğŸ‘Œ                      |
| ActiveSupport::Multibyte::Chars | ğŸ‘Œ            | âŒ             | âŒ             | ğŸ‘Œ                      |
| ActiveRecord::Relation          | âŒ            | ğŸ’€             | ğŸ’€             | ğŸ‘Œ                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   311.021M memsize (   576.000  retained)
                         6.300M objects (     6.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o    38.060M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)
           Oj.dump c    38.060M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)
       Oj.dump c, aj    38.060M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   38060000 allocated
           Oj.dump c:   38060000 allocated - same
       Oj.dump c, aj:   38060000 allocated - same
            to_json::  311020920 allocated - 8.17x more
---------------------------------------------

                     user     system      total        real
to_json:         3.690000   0.220000   3.910000 (  4.527182)
Oj.dump o        0.490000   0.040000   0.530000 (  0.540168)
Oj.dump c        0.470000   0.030000   0.500000 (  0.509277)
Oj.dump c, aj    0.540000   0.010000   0.550000 (  0.586707)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
