Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   510.543M memsize (   248.000  retained)
                        10.400M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   249.900M memsize (   232.000  retained)
                         4.460M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    65.380M memsize (    40.000  retained)
                         1.140M objects (     1.000  retained)
                        41.000  strings (     0.000  retained)
    Oj::Rails.encode    65.380M memsize (     0.000  retained)
                         1.140M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   65380000 allocated
             Oj.dump:   65380040 allocated - 1.00x more
             msgpack:  249900232 allocated - 3.82x more
       Rails to_json:  510542520 allocated - 7.81x more
---------------------------------------------

                       user     system      total        real
Rails to_json      4.200000   0.300000   4.500000 (  4.755333)
msgpack            1.610000   0.050000   1.660000 (  1.699641)
Oj.dump            0.460000   0.010000   0.470000 (  0.479320)
Oj::Rails.encode   0.620000   0.010000   0.630000 (  0.637140)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   507.343M memsize (   248.000  retained)
                        10.320M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   244.309M memsize (     9.344k retained)
                         4.320M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    66.180M memsize (   272.000  retained)
                         1.160M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
    Oj::Rails.encode    66.180M memsize (     0.000  retained)
                         1.160M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   66180000 allocated
             Oj.dump:   66180272 allocated - 1.00x more
             msgpack:  244309344 allocated - 3.69x more
       Rails to_json:  507342520 allocated - 7.67x more
---------------------------------------------

                       user     system      total        real
Rails to_json      3.530000   1.120000   4.650000 (  4.673958)
msgpack            1.490000   0.010000   1.500000 (  1.499546)
Oj.dump            0.670000   0.010000   0.680000 (  0.681599)
Oj::Rails.encode   0.850000   0.070000   0.920000 (  0.926844)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb
ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from ruby-json-benchmark/lib/test_data_rails.rb:30:in `<top (required)>'
	from compatibility_test.rb:10:in `require'
	from compatibility_test.rb:10:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   510.543M memsize (   344.000  retained)
                        10.400M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   249.900M memsize (   232.000  retained)
                         4.460M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    65.380M memsize (    40.000  retained)
                         1.140M objects (     1.000  retained)
                        41.000  strings (     0.000  retained)
    Oj::Rails.encode    65.380M memsize (     0.000  retained)
                         1.140M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   65380000 allocated
             Oj.dump:   65380040 allocated - 1.00x more
             msgpack:  249900232 allocated - 3.82x more
       Rails to_json:  510542520 allocated - 7.81x more
---------------------------------------------

                       user     system      total        real
Rails to_json      3.330000   0.170000   3.500000 (  3.526684)
msgpack            1.360000   0.020000   1.380000 (  1.386241)
Oj.dump            0.470000   0.000000   0.470000 (  0.474767)
Oj::Rails.encode   0.530000   0.010000   0.540000 (  0.533684)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   507.343M memsize (   344.000  retained)
                        10.320M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   244.309M memsize (     9.344k retained)
                         4.320M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    66.180M memsize (   272.000  retained)
                         1.160M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
    Oj::Rails.encode    66.180M memsize (     0.000  retained)
                         1.160M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   66180000 allocated
             Oj.dump:   66180272 allocated - 1.00x more
             msgpack:  244309344 allocated - 3.69x more
       Rails to_json:  507342520 allocated - 7.67x more
---------------------------------------------

                       user     system      total        real
Rails to_json      4.080000   0.250000   4.330000 (  4.336208)
msgpack            1.380000   0.040000   1.420000 (  1.411775)
Oj.dump            0.560000   0.020000   0.580000 (  0.586827)
Oj::Rails.encode   0.470000   0.000000   0.470000 (  0.472031)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   481.042M memsize (   536.000  retained)
                        10.220M objects (     6.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   229.458M memsize (     7.944k retained)
                         4.220M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    65.920M memsize (   232.000  retained)
                         1.150M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
    Oj::Rails.encode    65.920M memsize (     0.000  retained)
                         1.150M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   65920000 allocated
             Oj.dump:   65920232 allocated - 1.00x more
             msgpack:  229457944 allocated - 3.48x more
       Rails to_json:  481042272 allocated - 7.30x more
---------------------------------------------

                       user     system      total        real
Rails to_json      3.600000   0.170000   3.770000 (  3.781016)
msgpack            1.310000   0.100000   1.410000 (  1.409675)
Oj.dump            0.510000   0.020000   0.530000 (  0.536759)
Oj::Rails.encode   0.500000   0.010000   0.510000 (  0.507860)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   505.833M memsize (   464.000  retained)
                        10.280M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
             msgpack   244.000M memsize (   232.000  retained)
                         4.310M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    64.180M memsize (    40.000  retained)
                         1.110M objects (     1.000  retained)
                        41.000  strings (     0.000  retained)
    Oj::Rails.encode    64.180M memsize (     0.000  retained)
                         1.110M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   64180000 allocated
             Oj.dump:   64180040 allocated - 1.00x more
             msgpack:  244000232 allocated - 3.80x more
       Rails to_json:  505832848 allocated - 7.88x more
---------------------------------------------

                       user     system      total        real
Rails to_json      3.420000   0.190000   3.610000 (  3.621979)
msgpack            1.330000   0.030000   1.360000 (  1.358805)
Oj.dump            0.440000   0.000000   0.440000 (  0.448693)
Oj::Rails.encode   0.460000   0.010000   0.470000 (  0.462458)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   502.633M memsize (   464.000  retained)
                        10.200M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
             msgpack   238.409M memsize (     9.344k retained)
                         4.170M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    64.980M memsize (   272.000  retained)
                         1.130M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
    Oj::Rails.encode    64.980M memsize (     0.000  retained)
                         1.130M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   64980000 allocated
             Oj.dump:   64980272 allocated - 1.00x more
             msgpack:  238409344 allocated - 3.67x more
       Rails to_json:  502632848 allocated - 7.74x more
---------------------------------------------

                       user     system      total        real
Rails to_json      4.100000   0.290000   4.390000 (  4.400083)
msgpack            1.360000   0.030000   1.390000 (  1.389773)
Oj.dump            0.540000   0.000000   0.540000 (  0.541457)
Oj::Rails.encode   0.510000   0.010000   0.520000 (  0.522079)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   477.133M memsize (   656.000  retained)
                        10.120M objects (     8.000  retained)
                        50.000  strings (     1.000  retained)
             msgpack   224.358M memsize (     7.944k retained)
                         4.090M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump    64.720M memsize (   232.000  retained)
                         1.120M objects (     2.000  retained)
                        42.000  strings (     0.000  retained)
    Oj::Rails.encode    64.720M memsize (     0.000  retained)
                         1.120M objects (     0.000  retained)
                        42.000  strings (     0.000  retained)

Comparison:
    Oj::Rails.encode:   64720000 allocated
             Oj.dump:   64720232 allocated - 1.00x more
             msgpack:  224357944 allocated - 3.47x more
       Rails to_json:  477132520 allocated - 7.37x more
---------------------------------------------

                       user     system      total        real
Rails to_json      3.590000   0.160000   3.750000 (  3.770335)
msgpack            1.290000   0.090000   1.380000 (  1.392469)
Oj.dump            0.540000   0.030000   0.570000 (  0.557456)
Oj::Rails.encode   0.490000   0.010000   0.500000 (  0.504534)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb
