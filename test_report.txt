Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   510.543M memsize (   248.000  retained)
                        10.400M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   249.920M memsize (   232.000  retained)
                         4.460M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   249.330M memsize (     0.000  retained)
                         5.030M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  249330000 allocated
             msgpack:  249920232 allocated - 1.00x more
       Rails to_json:  510542520 allocated - 2.05x more
---------------------------------------------

                     user     system      total        real
Rails to_json    3.480000   0.350000   3.830000 (  3.883356)
msgpack          1.410000   0.040000   1.450000 (  1.467871)
Oj.dump          1.450000   0.040000   1.490000 (  1.594976)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   507.343M memsize (   248.000  retained)
                        10.320M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   244.329M memsize (     9.344k retained)
                         4.320M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   244.130M memsize (     0.000  retained)
                         4.900M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  244130000 allocated
             msgpack:  244329344 allocated - 1.00x more
       Rails to_json:  507342520 allocated - 2.08x more
---------------------------------------------

                     user     system      total        real
Rails to_json    5.280000   0.370000   5.650000 (  5.657731)
msgpack          1.470000   0.080000   1.550000 (  1.561721)
Oj.dump          1.230000   0.050000   1.280000 (  1.282390)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb
projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from projects/ruby-json-benchmark/lib/test_data_rails.rb:30:in `<top (required)>'
	from compatibility_test.rb:10:in `require'
	from compatibility_test.rb:10:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   510.543M memsize (   344.000  retained)
                        10.400M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   249.920M memsize (   232.000  retained)
                         4.460M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   249.330M memsize (     0.000  retained)
                         5.030M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  249330000 allocated
             msgpack:  249920232 allocated - 1.00x more
       Rails to_json:  510542520 allocated - 2.05x more
---------------------------------------------

                     user     system      total        real
Rails to_json    3.240000   0.120000   3.360000 (  3.368084)
msgpack          1.350000   0.030000   1.380000 (  1.387916)
Oj.dump          1.080000   0.010000   1.090000 (  1.090306)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   507.343M memsize (   344.000  retained)
                        10.320M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   244.329M memsize (     9.344k retained)
                         4.320M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   244.130M memsize (     0.000  retained)
                         4.900M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  244130000 allocated
             msgpack:  244329344 allocated - 1.00x more
       Rails to_json:  507342520 allocated - 2.08x more
---------------------------------------------

                     user     system      total        real
Rails to_json    5.180000   0.320000   5.500000 (  5.505182)
msgpack          1.440000   0.070000   1.510000 (  1.505771)
Oj.dump          1.180000   0.040000   1.220000 (  1.232371)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   481.042M memsize (   536.000  retained)
                        10.220M objects (     6.000  retained)
                        50.000  strings (     0.000  retained)
             msgpack   229.478M memsize (     7.944k retained)
                         4.220M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   228.880M memsize (     0.000  retained)
                         4.800M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  228880000 allocated
             msgpack:  229477944 allocated - 1.00x more
       Rails to_json:  481042272 allocated - 2.10x more
---------------------------------------------

                     user     system      total        real
Rails to_json    6.280000   1.340000   7.620000 (  9.186579)
msgpack          1.940000   0.330000   2.270000 (  2.783108)
Oj.dump          1.520000   0.460000   1.980000 (  2.142883)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   505.833M memsize (   464.000  retained)
                        10.280M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
             msgpack   244.020M memsize (   232.000  retained)
                         4.310M objects (     1.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   243.820M memsize (     0.000  retained)
                         4.890M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  243820000 allocated
             msgpack:  244020232 allocated - 1.00x more
       Rails to_json:  505832848 allocated - 2.07x more
---------------------------------------------

                     user     system      total        real
Rails to_json    3.990000   0.440000   4.430000 (  4.582801)
msgpack          1.500000   0.070000   1.570000 (  1.631660)
Oj.dump          1.420000   0.070000   1.490000 (  1.804064)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   502.633M memsize (   464.000  retained)
                        10.200M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
             msgpack   238.429M memsize (     9.344k retained)
                         4.170M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   238.620M memsize (     0.000  retained)
                         4.760M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             msgpack:  238429344 allocated
             Oj.dump:  238620000 allocated - 1.00x more
       Rails to_json:  502632848 allocated - 2.11x more
---------------------------------------------

                     user     system      total        real
Rails to_json    5.780000   0.440000   6.220000 (  6.292851)
msgpack          1.720000   0.190000   1.910000 (  2.018105)
Oj.dump          1.260000   0.060000   1.320000 (  1.329254)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| class                           | JSON to_json | Oj.dump | Oj::Rails.encode | Oj to_json | msgpack "rails" |
+---------------------------------+--------------+---------+------------------+------------+-----------------+
| Regexp                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FalseClass                      | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| NilClass                        | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Object                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| TrueClass                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| String                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringChinese                   | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial                   | âŒ           | âŒ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial2                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| StringSpecial3                  | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Numeric                         | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Symbol                          | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Time                            | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Array                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Hash                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| HashNotEmpty                    | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Date                            | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| DateTime                        | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Enumerable                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimal                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| BigDecimalInfinity              | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Struct                          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Float                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| FloatInfinity                   | ğŸ’€           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | âŒ              |
| Range                           | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Complex                         | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Exception                       | ğŸ‘Œ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| OpenStruct                      | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Rational                        | ğŸ‘Œ           | âŒ      | âŒ               | ğŸ‘Œ         | ğŸ‘Œ              |
| Process::Status                 | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::TimeWithZone     | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveModel::Errors             | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Duration         | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveSupport::Multibyte::Chars | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord::Relation          | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
| ActiveRecord                    | âŒ           | ğŸ‘Œ      | ğŸ‘Œ               | ğŸ‘Œ         | ğŸ‘Œ              |
+---------------------------------+--------------+---------+------------------+------------+-----------------+

Calculating -------------------------------------
       Rails to_json   477.133M memsize (   656.000  retained)
                        10.120M objects (     8.000  retained)
                        50.000  strings (     1.000  retained)
             msgpack   224.378M memsize (     7.944k retained)
                         4.090M objects (    18.000  retained)
                        50.000  strings (     0.000  retained)
             Oj.dump   224.170M memsize (     0.000  retained)
                         4.680M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)

Comparison:
             Oj.dump:  224170000 allocated
             msgpack:  224377944 allocated - 1.00x more
       Rails to_json:  477132520 allocated - 2.13x more
---------------------------------------------

                     user     system      total        real
Rails to_json    3.360000   0.050000   3.410000 (  3.467636)
msgpack          1.400000   0.070000   1.470000 (  1.546034)
Oj.dump          1.080000   0.010000   1.090000 (  1.097073)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark.rb
